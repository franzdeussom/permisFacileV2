"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1215],{1215:(F,p,a)=>{a.r(p),a.d(p,{QuestionPageModule:()=>I,QuestionResolve:()=>c});var f=a(4135),o=a(8779),v=a(9808),g=a(4030),d=a(1284),s=a(3075),S=a(1086),Z=a(2198),T=a(4850),Q=a(3087),h=a(655),C=a(6629),t=a(1269),y=a(4554);function b(i,r){1&i&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"DONE_BUTTON")))}function Y(i,r){1&i&&t._UZ(0,"ion-icon",8)}function A(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"form",9),t.NdJ("ngSubmit",function(){return t.CHM(e),t.oxw().save()}),t.TgZ(1,"ion-list")(2,"ion-item")(3,"ion-label",10),t._uU(4,"Intitule"),t.qZA(),t._UZ(5,"ion-input",11),t.qZA(),t.TgZ(6,"ion-item")(7,"ion-label",10),t._uU(8,"Image"),t.qZA(),t._UZ(9,"ion-input",12),t.qZA(),t.TgZ(10,"ion-item")(11,"ion-label"),t._uU(12,"Date Creation"),t.qZA(),t._UZ(13,"ion-datetime",13),t.qZA(),t.TgZ(14,"ion-item")(15,"ion-label"),t._uU(16,"Last Update"),t.qZA(),t._UZ(17,"ion-datetime",14),t.qZA()()()}if(2&i){const e=t.oxw();t.Q6J("formGroup",e.form)}}let U=(()=>{class i{constructor(e,n,l,u,N,O){this.activatedRoute=e,this.navController=n,this.formBuilder=l,this.platform=u,this.toastCtrl=N,this.questionService=O,this.isSaving=!1,this.isNew=!0,this.form=this.formBuilder.group({id:[null,[]],intitule:[null,[s.kI.required]],image:[null,[]],dateCreation:[null,[]],lastUpdate:[null,[]]}),this.form.valueChanges.subscribe(P=>{this.isReadyToSave=this.form.valid})}ngOnInit(){this.activatedRoute.data.subscribe(e=>{this.question=e.data,this.isNew=null==this.question.id,this.updateForm(this.question)})}updateForm(e){this.form.patchValue({id:e.id,intitule:e.intitule,image:e.image,dateCreation:this.isNew?(new Date).toISOString().split("T")[0]:e.dateCreation,lastUpdate:this.isNew?(new Date).toISOString().split("T")[0]:e.lastUpdate})}save(){this.isSaving=!0;const e=this.createFromForm();e.dateCreation=new Date(e.dateCreation).toISOString().split("T")[0],e.lastUpdate=new Date(e.lastUpdate).toISOString().split("T")[0],this.subscribeToSaveResponse(this.isNew?this.questionService.create(e):this.questionService.update(e))}subscribeToSaveResponse(e){e.subscribe(n=>this.onSaveSuccess(n),n=>this.onError(n.error))}onSaveSuccess(e){return(0,h.mG)(this,void 0,void 0,function*(){let n="updated";201===e.status&&(n="created"),this.isSaving=!1,yield(yield this.toastCtrl.create({message:`Question ${n} successfully.`,duration:2e3,position:"middle"})).present(),yield this.navController.navigateBack("/tabs/entities/question")})}previousState(){window.history.back()}onError(e){return(0,h.mG)(this,void 0,void 0,function*(){this.isSaving=!1,console.error(e),yield(yield this.toastCtrl.create({message:"Failed to load data",duration:2e3,position:"middle"})).present()})}createFromForm(){return Object.assign(Object.assign({},new C.H),{id:this.form.get(["id"]).value,intitule:this.form.get(["intitule"]).value,image:this.form.get(["image"]).value,dateCreation:this.form.get(["dateCreation"]).value,lastUpdate:this.form.get(["lastUpdate"]).value})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(g.gz),t.Y36(o.SH),t.Y36(s.qu),t.Y36(o.t4),t.Y36(o.yF),t.Y36(y.a))},i.\u0275cmp=t.Xpm({type:i,selectors:[["page-question-update"]],decls:12,vars:4,consts:[["color","tertiary"],["slot","start"],["slot","end"],["color","primary",3,"disabled","click"],[4,"ngIf"],["name","checkmark",4,"ngIf"],[1,"ion-padding"],["name","form",3,"formGroup","ngSubmit",4,"ngIf"],["name","checkmark"],["name","form",3,"formGroup","ngSubmit"],["position","floating"],["type","text","name","intitule","formControlName","intitule"],["type","text","name","image","formControlName","image"],["displayFormat","MM/DD/YYYY","formControlName","dateCreation","id","field_dateCreation"],["displayFormat","MM/DD/YYYY","formControlName","lastUpdate","id","field_lastUpdate"]],template:function(e,n){1&e&&(t.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),t._UZ(3,"ion-back-button"),t.qZA(),t.TgZ(4,"ion-title"),t._uU(5,"Question"),t.qZA(),t.TgZ(6,"ion-buttons",2)(7,"ion-button",3),t.NdJ("click",function(){return n.save()}),t.YNc(8,b,3,3,"span",4),t.YNc(9,Y,1,0,"ion-icon",5),t.qZA()()()(),t.TgZ(10,"ion-content",6),t.YNc(11,A,18,1,"form",7),t.qZA()),2&e&&(t.xp6(7),t.Q6J("disabled",!n.isReadyToSave),t.xp6(1),t.Q6J("ngIf",n.platform.is("ios")),t.xp6(1),t.Q6J("ngIf",!n.platform.is("ios")),t.xp6(2),t.Q6J("ngIf",n.form))},directives:[o.Gu,o.sr,o.Sm,o.oU,o.cs,o.wd,o.YG,v.O5,o.gu,o.W2,s._Y,s.JL,s.sg,o.q_,o.Ie,o.Q$,o.pK,o.j9,s.JJ,s.u,o.x4,o.QI],pipes:[f.X$],encapsulation:2}),i})();var m=a(4560);let c=(()=>{class i{constructor(e){this.service=e}resolve(e,n){const l=e.params.id?e.params.id:null;return l?this.service.find(l).pipe((0,Z.h)(u=>u.ok),(0,T.U)(u=>u.body)):(0,S.of)(new m.HN)}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(m.aE))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const R=[{path:"",component:Q.D,data:{authorities:["ROLE_USER"]},canActivate:[d.Z]},{path:"new",component:U,resolve:{data:c},data:{authorities:["ROLE_USER"]},canActivate:[d.Z]},{path:":id/view",component:m.oO,resolve:{data:c},data:{authorities:["ROLE_USER"]},canActivate:[d.Z]},{path:":id/edit",component:U,resolve:{data:c},data:{authorities:["ROLE_USER"]},canActivate:[d.Z]}];let I=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[o.Pc,s.u5,s.UX,v.ez,f.aw,g.Bz.forChild(R)]]}),i})()}}]);