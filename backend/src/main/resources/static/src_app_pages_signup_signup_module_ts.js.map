{"version":3,"file":"src_app_pages_signup_signup_module_ts.js","mappings":"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","sources":["./src/app/pages/signup/signup.module.ts","./src/app/pages/signup/signup.page.ts"],"sourcesContent":["import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { RouterModule, Routes } from '@angular/router';\nimport { IonicModule } from '@ionic/angular';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { SignupPage } from './signup.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: SignupPage,\n  },\n];\n\n@NgModule({\n  imports: [CommonModule, FormsModule, IonicModule, RouterModule.forChild(routes), TranslateModule],\n  declarations: [SignupPage],\n})\nexport class SignupPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { NavController, ToastController } from '@ionic/angular';\nimport { TranslateService } from '@ngx-translate/core';\nimport { UserService } from '../../services/user/user.service';\n\n@Component({\n  selector: 'app-signup',\n  templateUrl: './signup.page.html',\n  styleUrls: ['./signup.page.scss'],\n})\nexport class SignupPage implements OnInit {\n  // The account fields for the signup form\n  account: {\n    login: string;\n    email: string;\n    firstName: string;\n    lastName: string;\n    password: string;\n    langKey: string;\n  } = {\n    login: '',\n    email: '',\n    firstName: '',\n    lastName: '',\n    password: '',\n    langKey: 'en',\n  };\n\n  // Our translated text strings\n  private signupErrorString: string;\n  private signupSuccessString: string;\n  private existingUserError: string;\n  private invalidPasswordError: string;\n\n  constructor(\n    public navController: NavController,\n    public userService: UserService,\n    public toastController: ToastController,\n    public translateService: TranslateService\n  ) {\n    this.translateService.get(['SIGNUP_ERROR', 'SIGNUP_SUCCESS', 'EXISTING_USER_ERROR', 'INVALID_PASSWORD_ERROR']).subscribe((values) => {\n      this.signupErrorString = values.SIGNUP_ERROR;\n      this.signupSuccessString = values.SIGNUP_SUCCESS;\n      this.existingUserError = values.EXISTING_USER_ERROR;\n      this.invalidPasswordError = values.INVALID_PASSWORD_ERROR;\n    });\n  }\n\n  ngOnInit() {}\n\n  doSignup() {\n    // set login to same as email\n    this.account.login = this.account.email;\n    // Attempt to login in through our User service\n    this.userService.signup(this.account).subscribe(\n      async () => {\n        const toast = await this.toastController.create({\n          message: this.signupSuccessString,\n          duration: 3000,\n          position: 'top',\n        });\n        toast.present();\n      },\n      async (response) => {\n        // Unable to sign up\n        const error = JSON.parse(response.error);\n        let displayError = this.signupErrorString;\n        if (response.status === 400 && error.type.includes('already-used')) {\n          displayError = this.existingUserError;\n        } else if (\n          response.status === 400 &&\n          error.message === 'error.validation' &&\n          error.fieldErrors[0].field === 'password' &&\n          error.fieldErrors[0].message === 'Size'\n        ) {\n          displayError = this.invalidPasswordError;\n        }\n        const toast = await this.toastController.create({\n          message: displayError,\n          duration: 3000,\n          position: 'middle',\n        });\n        toast.present();\n      }\n    );\n  }\n}\n"],"names":[],"sourceRoot":"webpack:///"}